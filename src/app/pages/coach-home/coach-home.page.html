<ion-header class="ion-no-border">
  <ion-toolbar>
    <ion-buttons slot="start">
      <div class="header-brand-container">
        <img src="assets/logo.png" alt="Logo" class="header-logo" />
        <span class="header-brand-name">Gymalian</span>
      </div>
    </ion-buttons>

    <ion-title class="header-page-title">Coach Dashboard - {{ coachName }}</ion-title>

    <ion-buttons slot="end">
      <!-- Notification Bell -->
      <ion-button (click)="openNotifications($event)" class="notification-btn">
        <ion-icon name="notifications-outline"></ion-icon>
        <ion-badge *ngIf="(notificationService.unreadCount$ | async) as count" color="danger" class="notif-badge">
          {{ count }}
        </ion-badge>
      </ion-button>

      <ion-button (click)="logout()">
        <ion-icon name="log-out-outline" color="secondary"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <!-- Navigation Tabs -->
  <div class="nav-container">
    <ion-segment [(ngModel)]="currentTab" (ionChange)="switchTab($any($event).detail.value)">
      <ion-segment-button value="dashboard">
        <ion-icon name="stats-chart-outline"></ion-icon>
        <ion-label>Dashboard</ion-label>
      </ion-segment-button>
      <ion-segment-button value="exercises">
        <ion-icon name="barbell-outline"></ion-icon>
        <ion-label>Exercises</ion-label>
      </ion-segment-button>
      <ion-segment-button value="plans">
        <ion-icon name="calendar-outline"></ion-icon>
        <ion-label>Plans</ion-label>
      </ion-segment-button>
      <ion-segment-button value="athletes">
        <ion-icon name="people-outline"></ion-icon>
        <ion-label>Athletes</ion-label>
      </ion-segment-button>
    </ion-segment>
  </div>

  <div class="content-container">
    <app-coach-dashboard *ngIf="currentTab === 'dashboard'"></app-coach-dashboard>
    <app-coach-exercises *ngIf="currentTab === 'exercises'"></app-coach-exercises>
    <app-coach-plans *ngIf="currentTab === 'plans'"></app-coach-plans>
    <app-coach-athletes *ngIf="currentTab === 'athletes'"></app-coach-athletes>
  </div>

  <ion-fab vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button (click)="generateCodePrompt()" color="tertiary">
      <ion-icon name="key"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-content>